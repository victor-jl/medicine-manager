<!--pages/detail/detail.wxml-->
<view class="container">
  <view wx:if="{{medicine}}" class="detail-card">
    <!-- è¯å“å›¾ç‰‡ -->
    <view wx:if="{{medicine.photos && medicine.photos.length > 0}}" class="medicine-image">
      <image src="{{medicine.photos[0]}}" mode="aspectFill"></image>
    </view>

    <!-- è¯å“ä¿¡æ¯ -->
    <view class="medicine-info">
      <text class="medicine-name">{{medicine.name}}</text>

      <!-- æ–°å¢å­—æ®µæ˜¾ç¤º -->
      <view wx:if="{{medicine.specification}}" class="info-row">
        <text class="info-label">è§„æ ¼ï¼š</text>
        <text class="info-value">{{medicine.specification}}</text>
      </view>
      <view wx:if="{{medicine.manufacturer}}" class="info-row">
        <text class="info-label">ç”Ÿäº§å‚å®¶ï¼š</text>
        <text class="info-value">{{medicine.manufacturer}}</text>
      </view>
      <view class="info-row">
        <text class="info-label">æœ‰æ•ˆæœŸï¼š</text>
        <text class="info-value">{{medicine.expiryDate || 'æœªè®¾ç½®'}}</text>
      </view>
      <view wx:if="{{medicine.usage}}" class="info-row">
        <text class="info-label">ç”¨æ³•ç”¨é‡ï¼š</text>
        <text class="info-value">{{medicine.usage}}</text>
      </view>
      <view wx:if="{{medicine.approvalNumber}}" class="info-row">
        <text class="info-label">å›½è¯å‡†å­—ï¼š</text>
        <text class="info-value">{{medicine.approvalNumber}}</text>
      </view>
      <view wx:if="{{medicine.storage}}" class="info-row">
        <text class="info-label">è´®è—æ¡ä»¶ï¼š</text>
        <text class="info-value">{{medicine.storage}}</text>
      </view>
      <view wx:if="{{medicine.ingredients}}" class="info-row">
        <text class="info-label">ä¸»è¦æˆåˆ†ï¼š</text>
        <text class="info-value">{{medicine.ingredients}}</text>
      </view>
      <view class="info-row">
        <text class="info-label">æ·»åŠ æ—¶é—´ï¼š</text>
        <text class="info-value">{{medicine.createTime}}</text>
      </view>
      <view wx:if="{{medicine.description}}" class="info-row">
        <text class="info-label">å¤‡æ³¨è¯´æ˜ï¼š</text>
        <text class="info-value">{{medicine.description}}</text>
      </view>
    </view>

    <!-- æ“ä½œæŒ‰é’® -->
    <view class="action-buttons">
      <button class="btn-primary" bindtap="recordTake">è®°å½•ä»Šå¤©å·²æœè¯</button>
      <button class="btn-danger" bindtap="deleteMedicine">åˆ é™¤è¯å“</button>
    </view>
  </view>

  <!-- æœè¯è®°å½• -->
  <view class="records-section">
    <text class="section-title">æœè¯è®°å½•</text>
    <view wx:if="{{records.length === 0}}" class="empty-state">
      <text>æš‚æ— æœè¯è®°å½•</text>
    </view>
    <view class="record-list">
      <view class="record-item" wx:for="{{records}}" wx:key="id">
        <text class="record-icon">ğŸ’Š</text>
        <text class="record-time">{{item.takeTime}}</text>
      </view>
    </view>
  </view>
</view>
