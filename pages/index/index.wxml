<!--pages/index/index.wxml-->
<view class="container">
  <!-- å¤´éƒ¨ -->
  <view class="header">
    <text class="header-title">è¯å“ç®¡å®¶</text>
    <text class="header-subtitle">æ‚¨çš„ä¸ªäººè¯å“ç®¡ç†åŠ©æ‰‹</text>
  </view>

  <!-- æ·»åŠ è¯å“æŒ‰é’® -->
  <view class="add-section">
    <button class="btn-add" bindtap="goToAdd">
      <text class="add-icon">+</text>
      <text>æ·»åŠ è¯å“</text>
    </button>
  </view>

  <!-- ä»Šæ—¥æœè¯è®°å½• -->
  <view class="card" wx:if="{{todayRecords.length > 0}}">
    <view class="card-header">
      <text class="card-title">ä»Šæ—¥æœè¯</text>
      <text class="card-count">{{todayRecords.length}} æ¬¡</text>
    </view>
    <view class="record-list">
      <view class="record-item" wx:for="{{todayRecords}}" wx:key="index">
        <text class="record-name">{{item.medicineName}}</text>
        <text class="record-time">{{item.takeTime}}</text>
      </view>
    </view>
  </view>

  <!-- å³å°†è¿‡æœŸè¯å“ -->
  <view class="card" wx:if="{{expiringMedicines.length > 0}}">
    <view class="card-header warning">
      <text class="card-title">âš ï¸ å³å°†è¿‡æœŸ</text>
    </view>
    <view class="medicine-list">
      <view class="medicine-item" wx:for="{{expiringMedicines}}" wx:key="id" bindtap="goToDetail" data-id="{{item.id}}">
        <text class="medicine-name">{{item.name}}</text>
        <text class="medicine-expiry">æœ‰æ•ˆæœŸ: {{item.expiryDate}}</text>
      </view>
    </view>
  </view>

  <!-- æˆ‘çš„è¯å“ -->
  <view class="card">
    <view class="card-header">
      <text class="card-title">æˆ‘çš„è¯å“</text>
      <text class="card-link" bindtap="goToRecords">æŸ¥çœ‹å…¨éƒ¨</text>
    </view>
    <view wx:if="{{medicines.length === 0}}" class="empty-state">
      <text>æš‚æ— è¯å“è®°å½•</text>
      <button class="btn-small" bindtap="goToAdd">æ·»åŠ ç¬¬ä¸€ä¸ªè¯å“</button>
    </view>
    <view class="medicine-list" wx:else>
      <view class="medicine-item" wx:for="{{medicines}}" wx:key="id" bindtap="goToDetail" data-id="{{item.id}}">
        <view class="medicine-info">
          <text class="medicine-name">{{item.name}}</text>
          <text class="medicine-expiry" wx:if="{{item.expiryDate}}">æœ‰æ•ˆæœŸ: {{item.expiryDate}}</text>
        </view>
        <text class="medicine-arrow">></text>
      </view>
    </view>
  </view>

  <!-- å¿«æ·æ“ä½œ -->
  <view class="quick-actions">
    <view class="action-item" bindtap="goToAdd">
      <text class="action-icon">ğŸ“·</text>
      <text class="action-text">æ‹ç…§è¯†åˆ«</text>
    </view>
    <view class="action-item" bindtap="goToRecords">
      <text class="action-icon">ğŸ“‹</text>
      <text class="action-text">æœè¯è®°å½•</text>
    </view>
  </view>
</view>
